{"file":"cat-date.js","mappings":"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","names":["CatDate","__stencil_proxyCustomElement","HTMLElement","i18n"],"sources":["src/components/cat-date/cat-date.scss?tag=cat-date&encapsulation=shadow","src/components/cat-date/cat-date.tsx"],"sourcesContent":["@use 'variables' as *;\n@use 'mixins' as *;\n\n:host {\n  display: block;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n.label-aria {\n  @include cat-visually-hidden;\n}\n\ncat-date-inline {\n  margin: 1rem;\n  width: 20rem;\n}\n","import { Placement } from '@floating-ui/dom';\nimport { Component, Element, Event, EventEmitter, Host, Method, Prop, Watch, h } from '@stencil/core';\nimport { getLocale } from '../cat-date-inline/cat-date-locale';\nimport { clampDate } from '../cat-date-inline/cat-date-math';\nimport { ErrorMap } from '../cat-form-hint/cat-form-hint';\nimport { catI18nRegistry as i18n } from '../cat-i18n/cat-i18n-registry';\n\n/**\n * A date input component to select a date from a calendar in a dropdown.\n */\n@Component({\n  tag: 'cat-date',\n  styleUrl: 'cat-date.scss',\n  shadow: {\n    delegatesFocus: true\n  }\n})\nexport class CatDate {\n  private readonly language = i18n.getLocale();\n  private readonly locale = getLocale(this.language);\n  private input?: HTMLCatInputElement;\n  private dateInline?: HTMLCatDateInlineElement;\n  private inputFocused = false;\n\n  @Element() hostElement!: HTMLElement;\n\n  /**\n   * Whether the label need a marker to shown if the input is required or optional.\n   */\n  @Prop() requiredMarker?: 'none' | 'required' | 'optional' | 'none!' | 'optional!' | 'required!' = 'optional';\n\n  /**\n   * Whether the label is on top or left.\n   */\n  @Prop() horizontal = false;\n\n  /**\n   * Hint for form autofill feature.\n   */\n  @Prop() autoComplete = 'off';\n\n  /**\n   * Whether the input should show a clear button.\n   */\n  @Prop() clearable = false;\n\n  /**\n   * Whether the input is disabled.\n   */\n  @Prop() disabled = false;\n\n  /**\n   * Optional hint text(s) to be displayed with the input.\n   */\n  @Prop() hint?: string | string[];\n\n  /**\n   * The name of an icon to be displayed in the input.\n   */\n  @Prop() icon?: string;\n\n  /**\n   * Display the icon on the right.\n   */\n  @Prop() iconRight = false;\n\n  /**\n   * A unique identifier for the input.\n   */\n  @Prop() identifier?: string;\n\n  /**\n   * The label for the input.\n   */\n  @Prop() label = '';\n\n  /**\n   * Visually hide the label, but still show it to assistive technologies like screen readers.\n   */\n  @Prop() labelHidden = false;\n\n  /**\n   * A maximum value for the date, given in local ISO 8601 date format YYYY-MM-DD.\n   */\n  @Prop() max?: string;\n\n  /**\n   * A minimum value for the date, given in local ISO 8601 date format YYYY-MM-DD.\n   */\n  @Prop() min?: string;\n\n  /**\n   * The name of the form control. Submitted with the form as part of a name/value pair.\n   */\n  @Prop() name?: string;\n\n  /**\n   * The placeholder text to display within the input.\n   */\n  @Prop() placeholder?: string;\n\n  /**\n   * A textual prefix to be displayed in the input.\n   */\n  @Prop() textPrefix?: string;\n\n  /**\n   * A textual suffix to be displayed in the input.\n   */\n  @Prop() textSuffix?: string;\n\n  /**\n   * The value is not editable.\n   */\n  @Prop() readonly = false;\n\n  /**\n   * A value is required or must be check for the form to be submittable.\n   */\n  @Prop() required = false;\n\n  /**\n   * The value of the control, given in local ISO 8601 date format YYYY-MM-DD.\n   */\n  @Prop({ mutable: true }) value?: string;\n\n  /**\n   * The validation errors for this input. Will render a hint under the input\n   * with the translated error message(s) `error.${key}`. If an object is\n   * passed, the keys will be used as error keys and the values translation\n   * parameters.\n   * If the value is `true`, the input will be marked as invalid without any\n   * hints under the input.\n   */\n  @Prop() errors?: boolean | string[] | ErrorMap;\n\n  /**\n   * Fine-grained control over when the errors are shown. Can be `false` to\n   * never show errors, `true` to show errors on blur, or a number to show\n   * errors change with the given delay in milliseconds or immediately on blur.\n   */\n  @Prop() errorUpdate: boolean | number = 0;\n\n  /**\n   * Attributes that will be added to the native HTML input element.\n   */\n  @Prop() nativeAttributes?: { [key: string]: string };\n\n  /**\n   * The placement of the dropdown.\n   */\n  @Prop() placement: Placement = 'bottom-end';\n\n  @Watch('min')\n  onMinChanged(min?: string, oldMin?: string) {\n    if (min !== oldMin) {\n      this.reclamp('min', min);\n    }\n  }\n\n  @Watch('max')\n  onMaxChanged(max?: string, oldMax?: string) {\n    if (max !== oldMax) {\n      this.reclamp('max', max);\n    }\n  }\n\n  /**\n   * Emitted when the value is changed.\n   */\n  @Event() catChange!: EventEmitter<string>;\n\n  /**\n   * Emitted when the input received focus.\n   */\n  @Event() catFocus!: EventEmitter<FocusEvent>;\n\n  /**\n   * Emitted when the input loses focus.\n   */\n  @Event() catBlur!: EventEmitter<FocusEvent>;\n\n  private get inputValue() {\n    const [match, year, month, day] = this.value?.match(/^(\\d{4})-(\\d{2})-(\\d{2})/) ?? [];\n    if (match) {\n      const date = new Date(Number(year), Number(month) - 1, Number(day));\n      const format = new Intl.DateTimeFormat(this.language, { year: 'numeric', month: '2-digit', day: '2-digit' });\n      return format.format(date);\n    }\n    return '';\n  }\n\n  componentDidLoad() {\n    const format = this.locale.formatStr.replace('YYYY', 'Y').replace('YY', 'y').replace('MM', 'm').replace('DD', 'd');\n    const [, p1, d1, p2, p3] = /(\\w+)([^\\w]+)(\\w+)[^\\w]+(\\w+)/.exec(format) || [];\n    this.input?.mask({\n      date: true,\n      dateMin: this.min,\n      dateMax: this.max,\n      delimiter: d1,\n      datePattern: [p1, p2, p3]\n    });\n  }\n\n  /**\n   * Programmatically move focus to the input. Use this method instead of\n   * `input.focus()`.\n   *\n   * @param options An optional object providing options to control aspects of\n   * the focusing process.\n   */\n  @Method()\n  async doFocus(options?: FocusOptions): Promise<void> {\n    this.input?.doFocus(options);\n  }\n\n  /**\n   * Programmatically remove focus from the input. Use this method instead of\n   * `input.blur()`.\n   */\n  @Method()\n  async doBlur(): Promise<void> {\n    this.input?.doBlur();\n  }\n\n  /**\n   * Clear the input.\n   */\n  @Method()\n  async clear(): Promise<void> {\n    this.input?.clear();\n  }\n\n  render() {\n    this.hostElement.tabIndex = Number(this.hostElement.getAttribute('tabindex')) || 0;\n    return (\n      <Host>\n        <cat-input\n          class=\"cat-date-input\"\n          ref={el => (this.input = el as HTMLCatInputElement)}\n          requiredMarker={this.requiredMarker}\n          horizontal={this.horizontal}\n          autoComplete={this.autoComplete}\n          clearable={this.clearable}\n          disabled={this.disabled}\n          hint={this.hint}\n          icon={this.icon}\n          iconRight={this.iconRight}\n          identifier={this.identifier}\n          labelHidden={this.labelHidden}\n          name={this.name}\n          placeholder={this.placeholder}\n          textPrefix={this.textPrefix}\n          textSuffix={this.textSuffix}\n          readonly={this.readonly}\n          required={this.required}\n          errors={this.errors}\n          errorUpdate={this.errorUpdate}\n          nativeAttributes={this.nativeAttributes}\n          value={this.inputValue}\n          onCatFocus={e => {\n            this.inputFocused = e.target === this.input;\n            e.stopPropagation();\n            this.catFocus.emit(e.detail);\n          }}\n          onCatBlur={e => {\n            e.stopPropagation();\n            this.onInputBlur(e.detail);\n          }}\n        >\n          <span slot=\"label\">\n            {this.label}\n            <span class=\"label-aria\"> ({this.locale.formatStr})</span>\n          </span>\n          <cat-dropdown\n            slot=\"addon\"\n            placement={this.placement}\n            arrowNavigation=\"none\"\n            noResize\n            onCatOpen={() => this.dateInline?.resetView()}\n          >\n            <cat-button\n              slot=\"trigger\"\n              icon=\"$cat:datepicker-calendar\"\n              iconOnly\n              class=\"cat-date-toggle\"\n              disabled={this.disabled}\n              a11yLabel={this.getTriggerA11yLabel()}\n            ></cat-button>\n            <div slot=\"content\">\n              <cat-date-inline\n                ref={el => (this.dateInline = el as HTMLCatDateInlineElement)}\n                min={this.min}\n                max={this.max}\n                value={this.value}\n                hint\n                weeks\n                noClear\n                onCatChange={this.onDateChange.bind(this)}\n              ></cat-date-inline>\n            </div>\n          </cat-dropdown>\n        </cat-input>\n      </Host>\n    );\n  }\n\n  private getTriggerA11yLabel() {\n    const date = this.locale.fromLocalISO(this.value);\n    return date ? `${this.locale.change}, ${this.locale.toLocalStr(date)}` : this.locale.choose;\n  }\n\n  private onInputBlur(e: FocusEvent) {\n    if (!this.input || !this.inputFocused) {\n      return;\n    }\n    this.inputFocused = false;\n    const oldValue = this.value;\n    const dateParsed = this.parse(this.input.value ?? '');\n    const dateMin = this.locale.fromLocalISO(this.min);\n    const dateMax = this.locale.fromLocalISO(this.max);\n    const date = dateParsed ? clampDate(dateMin, dateParsed, dateMax) : null;\n    this.value = date ? this.locale.toLocalISO(date) : undefined;\n    if (oldValue !== this.value) {\n      if (date) {\n        this.dateInline?.select(date);\n      } else {\n        this.dateInline?.clear();\n      }\n      this.catChange.emit(this.value);\n    }\n    this.input.value = this.inputValue;\n    this.catBlur.emit(e);\n  }\n\n  private onDateChange(e: CustomEvent<string>) {\n    e.stopPropagation();\n    const oldValue = this.value;\n    const date = e.detail ? this.locale.fromLocalISO(e.detail) : null;\n    this.value = date ? this.locale.toLocalISO(date) : undefined;\n    if (oldValue !== this.value) {\n      this.catChange.emit(this.value);\n    }\n  }\n\n  private parse(value: string) {\n    const [, p1, d1, p2, p3] = /(\\w+)([^\\w]+)(\\w+)[^\\w]+(\\w+)/.exec(this.locale.formatStr) || [];\n    const formatParts = [p1, p2, p3];\n    const parts = value.split(d1).map(s => Number(s || 'x'));\n    let year = parts[formatParts.indexOf('YYYY') || formatParts.indexOf('YY')] || this.locale.now().getFullYear();\n    const month = parts[formatParts.indexOf('MM')];\n    const day = parts[formatParts.indexOf('DD')];\n    if (!Number.isInteger(month) || !Number.isInteger(day)) {\n      return null;\n    } else if (year < 100) {\n      year += year < 50 ? 2000 : 1900;\n    }\n    return new Date(year, month - 1, day);\n  }\n\n  private reclamp(mode: 'min' | 'max', limit: string | undefined) {\n    const oldValue = this.value;\n    const oldDate = this.locale.fromLocalISO(oldValue);\n    const limitDate = this.locale.fromLocalISO(limit);\n    if (!oldDate || !limitDate) {\n      return;\n    }\n    const newDate = clampDate(mode === 'min' ? limitDate : null, oldDate, mode === 'max' ? limitDate : null);\n    const newValue = this.locale.toLocalISO(newDate);\n    if (oldValue !== newValue) {\n      this.value = newValue;\n      this.catChange.emit(newValue);\n    }\n  }\n}\n"],"version":3}